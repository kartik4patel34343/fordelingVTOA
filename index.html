<!doctype html>
<html>
    <head>
        <title>fordelingVTOA</title>
        <link rel='stylesheet' id='responsive-style-css'  href='http://www.studentvelferd.no/wp-content/themes/responsive/style.css?ver=1.9.3.4' type='text/css' media='all' />
        <link rel='stylesheet' id='responsive-media-queries-css'  href='http://www.studentvelferd.no/wp-content/themes/responsive/core/css/style.css?ver=1.9.3.4' type='text/css' media='all' />
        <link rel='stylesheet' id='responsive-child-style-css'  href='http://www.studentvelferd.no/wp-content/themes/velferdstinget-responsive/style.css?ver=1.9.3.4' type='text/css' media='all' />
        <style type="text/css">
#studentNumbers div {
    background-color: #aaa 
}
        </style>
        <script type="text/javascript" src="csv_parse.js"></script>
        <script type="text/javascript" src="render.js"></script>
        <script type="text/javascript" src="saint_lague.js"></script>
        <script type="text/javascript" src="fordeling.js"></script>
        <script type="text/javascript">
var f = new Fordeling();

function myAddField() {
    f.r.addField();
}

function startRead() {  
    // obtain input element through DOM 

    var file = document.getElementById('filet').files[0];
    if(file){
        getAsText(file);
    }
}

function getAsText(readFile) {

    var reader = new FileReader();

    // Read file into memory as UTF-8      
    reader.readAsText(readFile, "UTF-8");

    // Handle progress, success, and errors
    reader.onprogress = updateProgress;
    reader.onload = loaded;
    reader.onerror = errorHandler;
}

function updateProgress(evt) {
    /*
    // You could do something here
    if (evt.lengthComputable) {
        // evt.loaded and evt.total are ProgressEvent properties
        var loaded = (evt.loaded / evt.total);
        if (loaded < 1) {
            // Increase the prog bar length
            // style.width = (loaded * 200) + "px";
        }
    }
    */
}

function loaded(evt) {  
    // Obtain the read file data    
    
    f.initiateFromData( evt.target.result );

}

function errorHandler(evt) {
  if(evt.target.error.name == "NotReadableError") {
    // The file could not be read
  }
}


        </script>


    </head>
    <body>
        <div style="max-width:35em;margin-left:auto;margin-right:auto;">
        <p><a href="doc">Hvordan bruke denne siden</a></p>


        <form id="csvDisBitch">
            <label>Last opp en .csv</label><input type="file" id="filet"
            onchange="startRead()"/>
            <input type="button" value="Last inn" onclick="startRead()"/>
            <input type="button" value="Beregn valgforsamling" onclick="f.wash()"/>
            <input type="button" value="Beregn mandater" onclick="f.election()"/>
        </form>
        <!--
        <span> eller </span>
        <select id="chooseData">
            <option>Velg et datasett</option>
        </select> -->

        <hr />

        <form method="get" id="studentCount">
            <div id="studentNumbers">
            </div>
            <br />
            <input type="button" onclick="myAddField()" value=" + " />
            <br />
        </form>

        <p id="notProcessBox"
        onclick="document.getElementById('processbox').style.display='block';this.style.display='none'"><strong>Klikk for å vise stemmetellingen</strong></p>
        <div style="display:none;background-color:#ccc;" id="processbox"
            ondblclick="document.getElementById('notProcessBox').style.display='block';document.getElementById('processbox').style.display='none'"
            title="Dobbeltklikk for å lukke"></div>

        <h3>Resultat</h3>
        <div id="resultbox"></div>
        <p id="notvalgforsamling"
        onclick="document.getElementById('valgforsamling').style.display='block';this.style.display='none'"><strong>Valgforsaming (klikk
            for å vise)</strong></p>
        <div style="display:none;font-size:smaller;" id="valgforsamling"
            ondblclick="document.getElementById('notvalgforsamling').style.display='block';document.getElementById('valgforsamling').style.display='none'"
            title="Dobbeltklikk for å lukke"></div>
        </div>
    </body>
</html>
